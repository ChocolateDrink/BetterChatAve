// ==UserScript==
// @name         Better Chat Avenue
// @version      21/2/2025
// @description  tampermonkey script to make chatting sites like chat avenue abit better
// @author       warmchocolatedrink
// @match        *://*.chat-avenue.com/*
// @match        *://*.teen-chat.org/*
// @run-at       document-start
// ==/UserScript==

(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},a=[],s=0;s<t.length;s++){var c=t[s],l=o.base?c[0]+o.base:c[0],d=r[l]||0,p="".concat(l," ").concat(d);r[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var f=i(h,o);o.byIndex=s,e.splice(s,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=o(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=n(r[a]);e[s].references--}for(var c=o(t,i),l=0;l<r.length;l++){var d=n(r[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=c}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),e.push(d))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},588:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(601),i=n.n(o),r=n(314),a=n.n(r)()(i());a.push([t.id,':root {\n\t--border: 1.5px solid rgba(0, 221, 255, 0.9);\n}\n\n.gui-main {\n\tposition: absolute;\n\twidth: 400px;\n\theight: 300px;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tborder-radius: 12px;\n\tborder: var(--border);\n\tbackground: rgba(30, 30, 30, 0.85);\n\tbackdrop-filter: blur(8px);\n\tbox-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n\toverflow: hidden;\n\ttransition: opacity 0.15s ease;\n\tz-index: 99999;\n}\n\n.gui-title-bar {\n\tpadding: 12px 16px;\n\tbackground: rgba(40, 40, 40, 0.9);\n\tborder-bottom: 1px solid rgba(255, 255, 255, 0.1);\n\tuser-select: none;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.gui-title {\n\tcolor: #fff;\n\tfont-size: 14px;\n}\n\n.gui-control-btns-bar {\n\tdisplay: flex;\n\tgap: 8px;\n}\n\n.gui-control-btn {\n\tcursor: pointer;\n\tfont-size: 18px;\n\tcolor: #fff;\n\tbackground: none;\n\tborder: none;\n\tpadding: 0 6px;\n\topacity: 0.8;\n\ttransition: opacity 0.2s;\n}\n\n.gui-control-btn:hover {\n\topacity: 1;\n}\n\n.gui-control-btn:focus {\n\toutline: none;\n}\n\n.gui-content {\n\tpadding: 16px;\n\theight: calc(100% - 45px);\n\toverflow-y: auto;\n\tscrollbar-width: none;\n\tcolor: #fff;\n\t-webkit-scrollbar: none;\n}\n\n.gui-main-btn {\n\tbackground: rgba(60, 60, 60, 0.8);\n\tborder: var(--border);\n\tborder-radius: 6px;\n\tpadding: 8px 16px;\n\tmargin: 4px;\n\tcursor: pointer;\n\tcolor: #fff;\n\ttransition: all 0.2s ease;\n}\n\n.gui-main-btn:hover {\n\tbackground: rgba(80, 80, 80, 0.8);\n\ttransform: translateY(-1px);\n}\n\n.gui-main-toggle-container {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin: 8px 4px;\n\tcolor: #fff;\n}\n\n.gui-main-toggle-switch {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 50px;\n\theight: 24px;\n\tmargin-right: 8px;\n}\n\n.gui-main-toggle-switch input {\n\topacity: 0;\n\twidth: 0;\n\theight: 0;\n}\n\n.gui-main-toggle-slider {\n\tposition: absolute;\n\tcursor: pointer;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(60, 60, 60, 0.8);\n\ttransition: .4s;\n\tborder-radius: 24px;\n\tborder: var(--border);\n}\n\n.gui-main-toggle-slider:before {\n\tposition: absolute;\n\tcontent: "";\n\theight: 16px;\n\twidth: 16px;\n\tleft: 4px;\n\tbottom: 4px;\n\tbackground-color: white;\n\ttransition: .4s;\n\tborder-radius: 50%;\n}\n  \ninput:checked + .gui-main-toggle-slider:before {\n\ttransform: translateX(26px);\n}\n\n.gui-notif {\n\tposition: fixed;\n\ttop: 20px;\n\tright: 20px;\n\tbackground: rgba(40, 40, 40, 0.95);\n\tcolor: #fff;\n\tpadding: 12px 20px;\n\tborder-radius: 8px;\n\tborder: var(--border);\n\tbox-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n\tfont-size: 14px;\n\topacity: 0;\n\ttransform: translateY(-20px);\n\ttransition: all 0.3s ease;\n\tbackdrop-filter: blur(8px);\n\tz-index: 99999;\n\tcursor: pointer;\n\tmax-width: 300px;\n\tword-wrap: break-word;\n}\n\n.gui-notif.show {\n\topacity: 1;\n\ttransform: translateY(0);\n}\n\n.gui-notif:hover {\n\tbackground: rgba(50, 50, 50, 0.95);\n}',""]);const s=a},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var o=n(72),i=n.n(o),r=n(825),a=n.n(r),s=n(659),c=n.n(s),l=n(56),d=n.n(l),p=n(540),u=n.n(p),h=n(113),f=n.n(h),g=n(588),m={};m.styleTagTransform=f(),m.setAttributes=d(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=u();i()(g.A,m);g.A&&g.A.locals&&g.A.locals;const b={state:{},create(t,e,n){const o=document.createElement(t);return e&&(o.className="gui-"+e),n&&(o.textContent=n),o},init(){this.state.main=this.create("div","main"),this.state.titleBar=this.create("div","title-bar"),this.state.title=this.create("div","title","Better Chat Avenue");const t=this.create("div","control-btns-bar"),e=this.create("button","control-btn","-");e.onclick=()=>this.minimize();const n=this.create("button","control-btn","x");n.onclick=()=>this.deinit(),t.appendChild(e),t.appendChild(n),this.state.titleBar.appendChild(this.state.title),this.state.titleBar.appendChild(t),this.state.content=this.create("div","content"),this.state.main.appendChild(this.state.titleBar),this.state.main.appendChild(this.state.content),document.body.appendChild(this.state.main),document.addEventListener("keydown",(t=>{"Insert"===t.key&&("none"===this.state.main.style.display?(this.state.main.style.display="block",setTimeout((()=>{this.state.main.style.opacity="1"}),50)):(this.state.main.style.opacity="0",setTimeout((()=>{this.state.main.style.display="none"}),50)))})),this.dragify(this.state.titleBar),this.notif("you can click INSERT to toggle visibility of the ui",15)},deinit(){this.state.main.style.opacity="0",setTimeout((()=>{this.state.main.remove()}),300)},minimize(){this.state.main.style.opacity="0",setTimeout((()=>{this.state.main.style.display="none"}),300)},dragify(t){let e=!1,n={X:0,Y:0},o={X:0,Y:0},i={X:0,Y:0};t.addEventListener("mousedown",(n=>{o.X=n.clientX-i.X,o.Y=n.clientY-i.Y,(n.target===t||n.target.closest(".gui-title-bar"))&&(e=!0)})),document.addEventListener("mouseup",(()=>{o.X=n.X,o.Y=n.Y,e=!1})),document.addEventListener("mousemove",(t=>{e&&(t.preventDefault(),n.X=t.clientX-o.X,n.Y=t.clientY-o.Y,i.X=n.X,i.Y=n.Y,this.state.main.style.transform=`translate(${n.X}px, ${n.Y}px)`)}))},notif(t="",e=2,n=null){const o=this.create("div","notif",t);return o.addEventListener("click",(()=>{o.classList.remove("show"),setTimeout((()=>o.remove()),300),"function"==typeof n&&destroyCallback(),o.timeout&&clearTimeout(o.timeout)})),document.body.appendChild(o),setTimeout((()=>o.classList.add("show")),100),-1!==e&&(o.timeout=setTimeout((()=>{o.classList.remove("show"),setTimeout((()=>o.remove()),300)}),1e3*e)),o},addButton(t,e){const n=this.create("button","main-btn",t);return n.addEventListener("click",e),this.state.content.appendChild(n),n},addToggle(t,e){const n=this.create("div","main-toggle-container"),o=this.create("span","blank00",t),i=this.create("label","main-toggle-switch"),r=this.create("input");r.type="checkbox",r.addEventListener("change",(t=>e(t.target.checked)));const a=this.create("span","main-toggle-slider");return i.appendChild(r),i.appendChild(a),n.appendChild(i),n.appendChild(o),this.state.content.appendChild(n),n}};class y{constructor(t,e){this.name=t,this.type=e,this.enabled=!1,this.ui="Button"===e?b.addButton(t,this.onClicked.bind(this)):b.addToggle(t,this.toggle.bind(this))}onEnabled(){}onDisabled(){}onClicked(){}enable(){this.enabled=!0,this.onEnabled()}disable(){this.enabled=!1,this.onDisabled()}toggle(t){t?this.enable():this.disable()}}class v extends y{constructor(){super("Chat Filter Bypass","Toggle")}onEnabled(){const t=this;t.oldOpen=XMLHttpRequest.prototype.open,t.oldSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function(e,n){return this.hookable=n.includes("chat_process.php")||n.includes("private_process.php"),t.oldOpen.apply(this,arguments)},XMLHttpRequest.prototype.send=function(e){if(!this.hookable||!e)return t.oldSend.apply(this,[e]);const n=new URLSearchParams(e);let o=n.get("content");return o?(o=o.split(" ").map((t=>t.length>=3?t.split("").join("‎"):t)).join(" "),n.set("content",o),e=n.toString(),t.oldSend.apply(this,[e])):t.oldSend.apply(this,[e])}}onDisabled(){XMLHttpRequest.prototype.open=this.oldOpen,XMLHttpRequest.prototype.send=this.oldSend,this.oldOpen=null,this.oldSend=null}}const x={hooked:{},hookNotifis(t){if(t){if(!this.hooked.callSuccess)return;return callSuccess=this.hooked.callSuccess,void delete this.hooked.callSuccess}this.hooked.callSuccess=callSuccess,callSuccess=()=>{}},hookCloseRight(){const t=closeRight;closeRight=()=>{prepareRight(0),userReload(1),closeRight=t}}};class w extends y{constructor(){super("Search By Country","Button")}onClicked(){const t=prompt('country code to search, example: "sg" for singapore');t&&(prepareRight(0),$.post("system/panel/user_list.php",{},(function(e){$("#chat_right_data").html(e),firstPanel="",document.querySelectorAll("#chat_right_data .user_item").forEach((e=>{e.getAttribute("data-country")!==t.toUpperCase()&&e.remove()})),x.hookCloseRight()})))}}const k={modules:{},add(t){this.modules[t.name]=t},init(){this.add(new w),this.add(new v)}};new class{constructor(){this.init()}init(){b.init(),k.init(),window.bca={},window.bca.modules=k.modules,window.bca.gui=b}}})();
